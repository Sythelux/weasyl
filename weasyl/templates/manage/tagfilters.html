$def with (blocktag, filter_ratings)
$:{RENDER("common/stage_title.html", ["Blocked Tags", "Settings"])}

<div id="filters-content" class="content">
  <form method="POST" class="form skinny clear">
    <h3>Block a Tag</h3>

    <p>Enter a tag to block if you don't want to see content that is marked with this tag. To enter a tag composed of multiple words, separate each word with an underscore character, as in <strong>new_york_city</strong>. You can choose the range of ratings for which this tag will be blocked.</p>

    <div class="group">
      <input type="text" id="new-blocked-tag" class="input" name="titles" placeholder="Tag">
      <select class="input" name="rating">
      $for rating in filter_ratings:
        <option value="${rating.code}">${rating.block_text}</option>
      </select>
    </div>

    <div id="tagfilters_content_buttons" class="clear">
      <button class="button positive" name="do" value="create">Create Filter</button>
    </div>
  </form>

  <form method="POST" class="filters-blocked">
    <h3>Blocked Tags</h3>

    $if blocktag:
      <table class="filters-list">
        <thead>
          <tr>
            <th></th>
            <th>Tag</th>
            <th>Rating</th>
          </tr>
        </thead>
        <tbody>
          $for i in blocktag:
            $ tagid = i['tagid']
            $ title = i['title']
            <tr>
              <td>
                <label>
                  <input id="select-tag-${tagid}" type="checkbox" name="tagids" value="${tagid}" />
                </label>
              </td>
              <td>
                <label for="select-tag-${tagid}">
                  ${title}
                </label>
              </td>
              <td>
                <label for="select-tag-${tagid}">
                  ${R.CODE_MAP[i['rating']].nice_name}${'+' if i['rating'] != R.EXPLICIT.code else ''}
                </label>
              </td>
            </tr>
        </tbody>
      </table>
      <div class="buttons clear">
        <span style="float: right;">
          <button class="button negative" name="do" value="remove">Unblock selected tags</button>
        </span>
      </div>
    $else:
      <p>No tags blocked.</p>

  </form>

  <script type="module" src="${resource_path('js/tag-filters.js')}"></script>
</div>
